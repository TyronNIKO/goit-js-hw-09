{"version":3,"file":"2-form-3bfe4cfe.js","sources":["../../src/js/Form.js","../../src/js/2-form.js"],"sourcesContent":["'use strict';\nexport default class Form {\n\tformData = { email: '', message: '' };\n\terrorMessage = [];\n\tconstructor(selector, lsKey) {\n\t\tthis.form = document.querySelector(selector);\n\t\tthis.lsKey = lsKey;\n\t}\n\tloadFormData() {\n\t\tconst data = this.readLS(this.lsKey);\n\t\tif (!data) return;\n\t\tconst keys = Object.keys(data);\n\t\tkeys.forEach(key => {\n\t\t\tthis.form.elements[key].value = data[key];\n\t\t});\n\t}\n\tcollectInputsValue(form) {\n\t\tconst formData = new FormData(form);\n\t\tconst data = {};\n\t\tfor (const [key, value] of formData) {\n\t\t\tdata[key] = value.trim();\n\t\t}\n\t\treturn data;\n\t}\n\tvalidation(form) {\n\t\tlet valid = [];\n\t\tconst formData = new FormData(form);\n\t\tfor (const [key, value] of formData) {\n\t\t\tif (value.trim() === '') {\n\t\t\t\tvalid.push(false);\n\t\t\t} else {\n\t\t\t\tvalid.push(true);\n\t\t\t}\n\t\t}\n\t\tthis.errorMessage = 'Fill please all fields';\n\t\treturn valid;\n\t}\n\twriteLS(key, obj) {\n\t\tconst string = JSON.stringify(obj);\n\t\tlocalStorage.setItem(key, string);\n\t}\n\treadLS(key) {\n\t\tconst data = localStorage.getItem(key);\n\t\treturn JSON.parse(data);\n\t}\n\tinit() {\n\t\tthis.loadFormData();\n\t\tthis.form.addEventListener('input', e => {\n\t\t\tconst data = this.collectInputsValue(this.form);\n\t\t\tthis.formData = data;\n\t\t\tthis.writeLS(this.lsKey, data);\n\t\t});\n\t\tthis.form.addEventListener('submit', e => {\n\t\t\te.preventDefault();\n\t\t\tconst text = e.submitter.innerText;\n\t\t\tconst validation = this.validation(this.form);\n\t\t\tif (!validation.includes(false)) {\n\t\t\t\te.submitter.innerText = 'Form submited';\n\t\t\t\te.submitter.disabled = true;\n\t\t\t\tconsole.log(this.formData);\n\t\t\t\tthis.form.reset();\n\t\t\t\tlocalStorage.clear();\n\t\t\t} else {\n\t\t\t\talert(this.errorMessage ?? 'Error');\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\te.submitter.innerText = text;\n\t\t\t\te.submitter.disabled = false;\n\t\t\t}, 5000);\n\t\t});\n\t}\n}\n","'use strict';\nimport Form from './Form.js';\nconst form = new Form('.feedback-form', 'feedback-form-state');\nform.init();\n"],"names":["Form","selector","lsKey","__publicField","data","key","form","formData","value","valid","obj","string","e","text"],"mappings":"wKACe,MAAMA,CAAK,CAGzB,YAAYC,EAAUC,EAAO,CAF7BC,EAAA,gBAAW,CAAE,MAAO,GAAI,QAAS,EAAE,GACnCA,EAAA,oBAAe,CAAA,GAEd,KAAK,KAAO,SAAS,cAAcF,CAAQ,EAC3C,KAAK,MAAQC,CACb,CACD,cAAe,CACd,MAAME,EAAO,KAAK,OAAO,KAAK,KAAK,EACnC,GAAI,CAACA,EAAM,OACE,OAAO,KAAKA,CAAI,EACxB,QAAQC,GAAO,CACnB,KAAK,KAAK,SAASA,CAAG,EAAE,MAAQD,EAAKC,CAAG,CAC3C,CAAG,CACD,CACD,mBAAmBC,EAAM,CACxB,MAAMC,EAAW,IAAI,SAASD,CAAI,EAC5BF,EAAO,CAAA,EACb,SAAW,CAACC,EAAKG,CAAK,IAAKD,EAC1BH,EAAKC,CAAG,EAAIG,EAAM,KAAI,EAEvB,OAAOJ,CACP,CACD,WAAWE,EAAM,CAChB,IAAIG,EAAQ,CAAA,EACZ,MAAMF,EAAW,IAAI,SAASD,CAAI,EAClC,SAAW,CAACD,EAAKG,CAAK,IAAKD,EACtBC,EAAM,KAAM,IAAK,GACpBC,EAAM,KAAK,EAAK,EAEhBA,EAAM,KAAK,EAAI,EAGjB,YAAK,aAAe,yBACbA,CACP,CACD,QAAQJ,EAAKK,EAAK,CACjB,MAAMC,EAAS,KAAK,UAAUD,CAAG,EACjC,aAAa,QAAQL,EAAKM,CAAM,CAChC,CACD,OAAON,EAAK,CACX,MAAMD,EAAO,aAAa,QAAQC,CAAG,EACrC,OAAO,KAAK,MAAMD,CAAI,CACtB,CACD,MAAO,CACN,KAAK,aAAY,EACjB,KAAK,KAAK,iBAAiB,QAASQ,GAAK,CACxC,MAAMR,EAAO,KAAK,mBAAmB,KAAK,IAAI,EAC9C,KAAK,SAAWA,EAChB,KAAK,QAAQ,KAAK,MAAOA,CAAI,CAChC,CAAG,EACD,KAAK,KAAK,iBAAiB,SAAUQ,GAAK,CACzCA,EAAE,eAAc,EAChB,MAAMC,EAAOD,EAAE,UAAU,UACN,KAAK,WAAW,KAAK,IAAI,EAC5B,SAAS,EAAK,EAO7B,MAAM,KAAK,cAAgB,OAAO,GANlCA,EAAE,UAAU,UAAY,gBACxBA,EAAE,UAAU,SAAW,GACvB,QAAQ,IAAI,KAAK,QAAQ,EACzB,KAAK,KAAK,QACV,aAAa,MAAK,GAInB,WAAW,IAAM,CAChBA,EAAE,UAAU,UAAYC,EACxBD,EAAE,UAAU,SAAW,EACvB,EAAE,GAAI,CACV,CAAG,CACD,CACF,CCrEA,MAAMN,EAAO,IAAIN,EAAK,iBAAkB,qBAAqB,EAC7DM,EAAK,KAAM"}